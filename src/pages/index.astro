---
import Layout from '../layouts/Layout.astro';
import AlbumCard from '../components/AlbumCard.astro';

// WHY: Load and sort albums by date (newest first)
const albumModules = Object.values(
  import.meta.glob('/src/content/albums/*.json', { eager: true })
);

const albums = albumModules
  .map((module: any) => module.default)
  .sort((a, b) => b.date.localeCompare(a.date));
---

<Layout title="Portfolio">
	<div class="container mx-auto px-6 md:px-12 py-12">
		<div class="max-w-7xl mx-auto">
			<!-- WHY: Masonry-style grid like Peter Beavis -->
			<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
				{albums.map((album) => (
					<AlbumCard album={album} />
				))}
			</div>
		</div>
	</div>
</Layout>
