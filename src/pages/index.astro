---
import Layout from '../layouts/Layout.astro';
import AlbumCard from '../components/AlbumCard.astro';

// WHY index.astro: Entry point homepage for portfolio site
// WHY masonry grid layout: Matches reference Peter Beavis portfolio design
// WHY sort by date desc: Show newest albums first, typical for portfolio sites

// Load all albums from content directory
const albumModules = Object.values(
  import.meta.glob('/src/content/albums/*.json', { eager: true })
);

// Sort albums by date (newest first)
// WHY localeCompare for date strings: Sort ISO date strings correctly
const albums = albumModules
  .map((module: any) => module.default)
  .sort((a, b) => b.date.localeCompare(a.date));
---

<Layout title="Portfolio - Home">
	<div class="container mx-auto px-4 py-8">
		<div class="max-w-7xl">
			<header class="mb-8">
				<h1 class="text-4xl font-bold mb-2">Portfolio</h1>
				<p class="text-text-secondary">
					Фотогалерея альбомов
				</p>
			</header>

			<!-- WHY responsive grid: 1 col mobile, 2 tablet, 3 desktop, 4 large screens -->
			<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
				{albums.map((album) => (
					<AlbumCard album={album} />
				))}
			</div>
		</div>
	</div>
</Layout>
