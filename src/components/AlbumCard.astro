---
// WHY AlbumCard.astro: Album card with Peter Beavis style hover effects
// Elegant image zoom, text overlay reveal on hover

import { albumUrl, withBase } from '../lib/urls';

interface Album {
	id: string;
	title: string;
	date: string;
	cover: string;
	category?: string;
}

interface Props {
	album: Album;
}

const { album } = Astro.props;
const coverUrl = withBase(album.cover);
---

<a href={albumUrl(album.id)} class="block group stagger-item">
	<article class="relative overflow-hidden">
		<!-- WHY: Aspect ratio container for consistent grid -->
		<div class="aspect-[4/3] overflow-hidden bg-white/5">
			<img
				src={coverUrl}
				alt={album.title}
				loading="lazy"
				decoding="async"
				class="w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-105"
			/>
		</div>

		<!-- WHY: Overlay that appears on hover like Peter Beavis -->
		<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

		<!-- WHY: Title reveal from bottom on hover -->
		<div class="absolute bottom-0 left-0 right-0 p-6 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out">
			<h2 class="text-xl font-light tracking-wide text-white" style="font-family: var(--font-serif);">
				{album.title}
			</h2>
		</div>
	</article>
</a>

<style>
	/* WHY: Ensure smooth transform on the card */
	article {
		will-change: transform;
	}
</style>
